pipeline {
    agent any
    stages { 
        stage('Estructuras de control (IF)') {
            steps {
                script {
                    def condicion 

                    condicion = input(
                        id: 'condicionInput',
                        message: 'Seleccione una opción',
                        parameters: [
                            choice(name: 'Desplegar', choices: ['Si', 'No'], description: 'Se debe desplegar?')
                        ]
                        )
                    
                    if (condicion.equals('Si')) {
                        echo "Ejecuto acciones para desplegar"
                    } else {
                        echo "Ejecuto acciones para no desplegar (puede ser establecer una condición para que no se ejecute siguiente fase)"
                    }
                }
            }
        }

        stage ('Estructuras de control (SWITCH)') {
            steps {

                script {
                    def entorno

                    entorno = input(
                        message: "Indique el entorno",
                        parameters: [string(name: 'entorno', defaultValue: 'PRODUCCION', description: 'Entorno donde se realizarán las acciones')]
                    )
                
                    switch (entorno) {
                        case 'PRODUCCION':
                            echo "Entorno producción"
                        break
                        case 'PREPRODUCCION':
                            echo "Entorno de preproducción"
                        break
                        case 'DESARROLLO':
                            echo "Entorno de desarrollo"
                        break
                        default:
                            echo "Entorno no reconocido"
                        break

                    }
                }
            }
        }

        stage ('Estructuras de control (FOR)') {
            steps {
                script {

                    def servidores

                    servidores = input(
                        id: 'multiSelectInput',
                        message: 'Seleccione los servidores donde realizar el despliegue',
                        parameters: [
                            multiSelect(name: 'selectedValues', choices: ['tomcat1', 'tomcat2', 'tomcat3'], description: 'Selecciones los servidores')
                        ]
                    )

                    // Iterar por cada servicio seleccionado
                    for (def servidor in servidores) {
                        echo "Realizar despliegue en : ${servidor}"
                        // Acciones que se realizarían para desplegar
                        // ...

                    }
                }   
            }
        }
    }
}